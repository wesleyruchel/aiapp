import{a1 as A,v as H,E as $,a9 as U,g as q,w as C,ap as G,o as K,c as F,aq as P,t as L,r as M,a as O,$ as j,h as y,ar as I,as as B,at as N,al as W,a7 as Q}from"./index.e6b745d5.js";import{b as D,c as z}from"./focus-manager.40072c15.js";function ne(){let e;const t=q();function o(){e=void 0}return A(o),H(o),{removeTick:o,registerTick(i){e=i,$(()=>{e===i&&(U(t)===!1&&e(),e=void 0)})}}}const oe={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ae=["beforeShow","show","beforeHide","hide"];function ie({showing:e,canShow:t,hideOnRouteChange:o,handleShow:i,handleHide:s,processOnMount:c}){const r=q(),{props:a,emit:l,proxy:h}=r;let u;function v(n){e.value===!0?w(n):g(n)}function g(n){if(a.disable===!0||n!==void 0&&n.qAnchorHandled===!0||t!==void 0&&t(n)!==!0)return;const p=a["onUpdate:modelValue"]!==void 0;p===!0&&(l("update:modelValue",!0),u=n,$(()=>{u===n&&(u=void 0)})),(a.modelValue===null||p===!1)&&E(n)}function E(n){e.value!==!0&&(e.value=!0,l("beforeShow",n),i!==void 0?i(n):l("show",n))}function w(n){if(a.disable===!0)return;const p=a["onUpdate:modelValue"]!==void 0;p===!0&&(l("update:modelValue",!1),u=n,$(()=>{u===n&&(u=void 0)})),(a.modelValue===null||p===!1)&&T(n)}function T(n){e.value!==!1&&(e.value=!1,l("beforeHide",n),s!==void 0?s(n):l("hide",n))}function V(n){a.disable===!0&&n===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):n===!0!==e.value&&(n===!0?E:T)(u)}C(()=>a.modelValue,V),o!==void 0&&G(r)===!0&&C(()=>h.$route.fullPath,()=>{o.value===!0&&e.value===!0&&w()}),c===!0&&K(()=>{V(a.modelValue)});const k={show:g,hide:w,toggle:v};return Object.assign(h,k),k}const se={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function le(e,t=()=>{},o=()=>{}){return{transitionProps:F(()=>{const i=`q-transition--${e.transitionShow||t()}`,s=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:F(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const b=[];function ue(e){return b.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function J(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return P(e)}else if(e.__qPortal===!0){const o=P(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=P(e)}while(e!=null)}function re(e,t,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(o--,e.$options.name==="QMenu"){e=J(e,t);continue}e.hide(t)}e=P(e)}}const R=L({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function X(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function fe(e,t,o,i){const s=M(!1),c=M(!1);let r=null;const a={},l=i==="dialog"&&X(e);function h(v){if(v===!0){D(a),c.value=!0;return}c.value=!1,s.value===!1&&(l===!1&&r===null&&(r=B(!1,i)),s.value=!0,b.push(e.proxy),z(a))}function u(v){if(c.value=!1,v!==!0)return;D(a),s.value=!1;const g=b.indexOf(e.proxy);g!==-1&&b.splice(g,1),r!==null&&(N(r),r=null)}return O(()=>{u(!0)}),e.proxy.__qPortal=!0,j(e.proxy,"contentEl",()=>t.value),{showPortal:h,hidePortal:u,portalIsActive:s,portalIsAccessible:c,renderPortal:()=>l===!0?o():s.value===!0?[y(I,{to:r},y(R,o))]:void 0}}const f=[];let m;function Y(e){m=e.keyCode===27}function Z(){m===!0&&(m=!1)}function x(e){m===!0&&(m=!1,W(e,27)===!0&&f[f.length-1](e))}function S(e){window[e]("keydown",Y),window[e]("blur",Z),window[e]("keyup",x),m=!1}function de(e){Q.is.desktop===!0&&(f.push(e),f.length===1&&S("addEventListener"))}function ce(e){const t=f.indexOf(e);t!==-1&&(f.splice(t,1),f.length===0&&S("removeEventListener"))}const d=[];function _(e){d[d.length-1](e)}function pe(e){Q.is.desktop===!0&&(d.push(e),d.length===1&&document.body.addEventListener("focusin",_))}function me(e){const t=d.indexOf(e);t!==-1&&(d.splice(t,1),d.length===0&&document.body.removeEventListener("focusin",_))}export{se as a,ae as b,ne as c,le as d,fe as e,ie as f,ce as g,pe as h,de as i,J as j,ue as k,re as l,b as p,me as r,oe as u};
